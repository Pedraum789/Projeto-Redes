<!DOCTYPE html> 
<html> 
 <head> 
  <title> PUT </title> 
 </head> 
 <body>
  <!-- HTML5 Input Form Elements -->
  <input id="fileupload" type="file" name="fileupload" /> 
  <button id="upload-button" onclick="loadFileAsText()"> Upload </button>

  <!-- Ajax JavaScript File Upload Logic -->
  <script>
  function loadFileAsText(){
    var fileToLoad = document.getElementById("fileupload").files[0];

    var fileReader = new FileReader();
    fileReader.onload = function(fileLoadedEvent){
        var textFromFileLoaded = fileLoadedEvent.target.result;

        const toSend = {
          name: fileToLoad.name,
          content: fileLoadedEvent.target.result
        }

        const jsonString = JSON.stringify(toSend)

        
        const xhr = new XMLHttpRequest()
        xhr.open("PUT", "http://localhost:8080")
        xhr.setRequestHeader("Content-Type", "application/json");
        xhr.setRequestHeader("Access-Control-Allow-Origin", "*");

        xhr.onload = function () {
          alert(xhr.status + " " + xhr.statusText);
        };
        
        xhr.send(jsonString)
    };

    fileReader.readAsText(fileToLoad, "UTF-8");
    }
  </script>

 </body> 
</html>